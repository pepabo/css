<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width" name="viewport">
    
    <title>100年後も崩れないCSS勉強会 · 第1回「詳細度」</title>
    <meta name="description" content="さて、唐突にはじまりましたが「100年後も崩れない CSS 勉強会」、きょうは詳細度についてお話しします！

あっ 崩れてる！

…っていうのは CSS あるあるだと思うんですけど、スタイルシートを書いているときはきちんと表示できてても、あとから見るとあれ？おかしくない？みたいなこと、よくありませんか？

なんでスタイルが崩れてしまうんでしょうか。そのことを考えるために、逆になんでスタイルって「当">
<meta property="og:type" content="article">
<meta property="og:title" content="第1回「詳細度」">
<meta property="og:url" content="http://pepabo.github.io/css/specificity/index.html">
<meta property="og:site_name" content="100年後も崩れないCSS勉強会">
<meta property="og:description" content="さて、唐突にはじまりましたが「100年後も崩れない CSS 勉強会」、きょうは詳細度についてお話しします！

あっ 崩れてる！

…っていうのは CSS あるあるだと思うんですけど、スタイルシートを書いているときはきちんと表示できてても、あとから見るとあれ？おかしくない？みたいなこと、よくありませんか？

なんでスタイルが崩れてしまうんでしょうか。そのことを考えるために、逆になんでスタイルって「当">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/001.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/002.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/003.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/004.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/005.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/006.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/007.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/008.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/009.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/010.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/011.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/012.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/013.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/014.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/015.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/016.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/017.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/018.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/019.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/020.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/021.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/022.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/023.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/024.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/025.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/026.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/027.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/028.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/029.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/030.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/031.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/032.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/033.png">
<meta property="og:image" content="http://pepabo.github.io/css/css/specificity/034.png">
<meta property="og:updated_time" content="2015-10-04T08:05:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第1回「詳細度」">
<meta name="twitter:description" content="さて、唐突にはじまりましたが「100年後も崩れない CSS 勉強会」、きょうは詳細度についてお話しします！

あっ 崩れてる！

…っていうのは CSS あるあるだと思うんですけど、スタイルシートを書いているときはきちんと表示できてても、あとから見るとあれ？おかしくない？みたいなこと、よくありませんか？

なんでスタイルが崩れてしまうんでしょうか。そのことを考えるために、逆になんでスタイルって「当">
    
      <link rel="alternative" href="/css/atom.xml" title="100年後も崩れないCSS勉強会" type="application/atom+xml">
    
    
    <link rel="stylesheet" href="/css/stylesheets/style.css" type="text/css">
    
      <!-- Google Analytics -->
      <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-20528252-13', 'auto');
      ga('send', 'pageview');
      </script>
      <!-- End Google Analytics -->
    
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.4";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <script type="text/javascript" src="//media.line.me/js/line-button.js?v=20140411"></script>
    <header id="header" class="header">
      <h1 class="header__brand">
        <a href="/css/">100年後も崩れないCSS勉強会</a>
      </h1>
    </header>
    <div class="page">
      <article class="article" id="post-specificity" itemscope itemprop="blogPost">
  
    <header class="article__header">
      
  <h1 class="article__heading" itemprop="name">
    <a href="/css/specificity/">第1回「詳細度」</a>
  </h1>


      
  <a class="article__date" href="/css/specificity/">
    <time datetime="2015-09-16T10:30:00.000Z" itemprop="datePublished">2015年9月16日</time>
  </a>


    </header>
  
  
    <div class="article__body" itemprop="articleBody">
      <img src="/css/specificity/001.png" alt="001.png" title="">
<p>さて、唐突にはじまりましたが「100年後も崩れない CSS 勉強会」、きょうは詳細度についてお話しします！</p>
<img src="/css/specificity/002.png" alt="002.png" title="">
<p>あっ 崩れてる！</p>
<img src="/css/specificity/003.png" alt="003.png" title="">
<p>…っていうのは CSS あるあるだと思うんですけど、スタイルシートを書いているときはきちんと表示できてても、あとから見るとあれ？おかしくない？みたいなこと、よくありませんか？</p>
<img src="/css/specificity/004.png" alt="004.png" title="">
<p>なんでスタイルが崩れてしまうんでしょうか。そのことを考えるために、逆になんでスタイルって「当たる」のか、というところを改めて見てみようと思います。</p>
<img src="/css/specificity/005.png" alt="005.png" title="">
<p>CSS には書かれたスタイルを適用する優先順位があって、まず1番目に上から順番に「当てる」というのと、その次に詳細度という順番によって「当てる」という、ふたつのルールがあります。</p>
<img src="/css/specificity/006.png" alt="006.png" title="">
<p>まずは、上から順番に「当たる」ことについて見てみます。</p>
<img src="/css/specificity/007.png" alt="007.png" title="">
<p>GMO Pepabo, Inc. とだけ書かれた div 要素があって、class という名前の class が指定されています。この class をセレクタにして、ふたつのスタイルシートが書かれています。このように CSS が書かれているとき、いったい GMO Pepabo, Inc. は何色になるのでしょうか。</p>
<img src="/css/specificity/008.png" alt="008.png" title="">
<p>ブラウザは CSS を上から順番に解釈していくので、上から1行ずつ見ていくと…</p>
<img src="/css/specificity/009.png" alt="009.png" title="">
<p>ここで <code>color: red;</code> が評価されて、GMO Pepabo, Inc. は赤色になります。</p>
<img src="/css/specificity/010.png" alt="010.png" title="">
<p>しかし、スタイルシートはここで終わりではありません。</p>
<img src="/css/specificity/011.png" alt="011.png" title="">
<p>さらに見ていくと…</p>
<img src="/css/specificity/012.png" alt="012.png" title="">
<p>ここで <code>color: blue;</code> と書いてあるので、さきほどの <code>color: red;</code> の指定が上書きされて、GMO Pepabo, Inc. は青色になります。</p>
<img src="/css/specificity/013.png" alt="013.png" title="">
<p>このように、上に書かれているスタイルより、下に書かれてあるスタイルのほうが優先される。これがスタイルが「当たる」優先順位のひとつです。</p>
<img src="/css/specificity/014.png" alt="014.png" title="">
<p>それでは、もうひとつのほうのルール、</p>
<img src="/css/specificity/015.png" alt="015.png" title="">
<p>詳細度が高い順番に「当たる」というルールを見ていきます。</p>
<img src="/css/specificity/016.png" alt="016.png" title="">
<p>詳細度とは聞き慣れない言葉ですが、CSS でスタイルを指定するときのセレクタの種類によって、実は優先順位が異なります。その優先する強さのレベルを、ここでは A〜D ランクで格付けしてみようと思います。</p>
<img src="/css/specificity/017.png" alt="017.png" title="">
<p>優先する強い順に並べてみると、このようになります。<code>!important</code> や <code>*</code> といったものは、指定しただけで最強になったり優先順位がまったくないものなので、それぞれ最強と最弱としてランキングに含めてみました…。</p>
<img src="/css/specificity/018.png" alt="018.png" title="">
<p>ID セレクタは B ランクなので、このようにスタイルを指定すると、このスタイルの優先順位は　B が 1 ポイントというふうに考えます。</p>
<img src="/css/specificity/019.png" alt="019.png" title="">
<p>class セレクタで指定すれば、優先順位は C が 1 ポイントです。</p>
<img src="/css/specificity/020.png" alt="020.png" title="">
<p>複数のセレクタが同時に指定されているときは、優先順位は合算されます。このように ID と class を指定した場合は、B が 1 ポイント、C が 1 ポイントといった具合になります。</p>
<img src="/css/specificity/021.png" alt="021.png" title="">
<p>要素セレクタも加えてみれば、B が 1 ポイント、C が 1 ポイント、D が 1 ポイント。</p>
<img src="/css/specificity/022.png" alt="022.png" title="">
<p>CSS ではなく、HTML で div 要素の style 属性にスタイルを指定したなら、これは A が 1 ポイントとなり、いちばん優先順位が強くなります。</p>
<img src="/css/specificity/023.png" alt="023.png" title="">
<p>…というルールをふまえて、#id と .class が指定された div 要素に、ID セレクタでスタイルを指定したあとに class セレクタで同じプロパティのスタイルを指定してみました。このとき、いったい GMO Pepabo, Inc. は何色になるでしょうか？</p>
<img src="/css/specificity/024.png" alt="024.png" title="">
<p>答えは、赤色です。なぜなら、ID セレクタのほうが C より強い B レベルのポイントが 1 ポイントあるので、class セレクタのスタイルが下に書かれていたとしても、より優先順位が高いと判断されるからです。</p>
<img src="/css/specificity/025.png" alt="025.png" title="">
<p>じゃあ、ということで ID セレクタひとつのスタイルと、class セレクタを 10 個つなげたスタイルを書いてみました。このときは、いったい GMO Pepabo, Inc. は何色になるでしょうか。</p>
<img src="/css/specificity/026.png" alt="026.png" title="">
<p>これも、ID セレクタが優先されて赤色になります。10 進法みたいに桁が繰り上がるということはなく、C レベルの値がどれだけ高くても、B レベルで負けてしまうと優先順位は低いと見なされてしまうんですね。</p>
<img src="/css/specificity/027.png" alt="027.png" title="">
<p>だから、class セレクタのスタイルに ID セレクタを追加すれば、もちろん青色になります。</p>
<img src="/css/specificity/028.png" alt="028.png" title="">
<p>しかし、そのあとに class セレクタがたったひとつだとしても、<code>!important</code> を指定したスタイルがあれば、そちらが最強になってしまいます。</p>
<img src="/css/specificity/029.png" alt="029.png" title="">
<p>いくら CSS で <code>!important</code> を指定した最強スタイルも、HTML で style 属性にインラインで書かれた <code>!important</code> を指定したスタイルがあれば、こちらが優先される！</p>
<img src="/css/specificity/030.png" alt="030.png" title="">
<p>これらの例は隣りあって書かれているので把握することができますが、書いている箇所が離れていたり、CSS ではなく HTML にまでファイルが分かれて書かれていれば、把握しきれません。優先順位を把握しながら壊れないようにスタイルを指定するには、スタイルの詳細度を揃える必要があります。だから、 <code>!important</code> はしない。style 属性にスタイルを指定しない。ID セレクタ、要素セレクタでは指定しない。</p>
<img src="/css/specificity/031.png" alt="031.png" title="">
<p>じゃあどうするの！というと、原則的に class セレクタで指定しておくのはどうでしょうか。全部おなじ詳細度であれば、あとから書いたスタイルが優先されるというルールだけ意識すれば、優先順位を把握できるようになります。だから、何が影響しているのかわからなくなったり、意図せずスタイルが崩れるということも少なくなるのではないでしょうか…？</p>
<img src="/css/specificity/032.png" alt="032.png" title="">
<p>もちろん、CSS は詳細度のために書いているわけではありません。ID セレクタでスタイルを指定すれば、要素がページにひとつしかないことが伝わります。要素名をセレクタに指定してスタイルを指定すれば、わざわざ HTML で class を指定しなくてもスタイルが適用されますし、<code>body.pepabo</code> と書けば body 要素に <code>pepabo</code> という class が指定されたときだけスタイルを指定できます。自分以外の誰か、または半年後のすべてを忘れてしまった自分のためにも、伝わる CSS を書くべきなんです!!</p>
<img src="/css/specificity/033.png" alt="033.png" title="">
<p>というわけで、まとめです。class セレクタ最高！</p>
<img src="/css/specificity/034.png" alt="034.png" title="">
<p>さらに、class セレクタで指定しておくというのは、ほかの場所でも再利用できるというメリットもあります。次回は、いかに再利用しやすいように CSS を書くのかという、「コンポーネント」について考えていきたいと思います。</p>
<h4 id="嘘かもしれないから、W3C_の仕様書も読んでみよう！">嘘かもしれないから、W3C の仕様書も読んでみよう！</h4><ul>
<li><a href="http://www.w3.org/TR/selectors/#specificity" target="_blank" rel="external">Selectors Level 3 - 9. Calculating a selector’s specificity</a></li>
<li><a href="https://drafts.csswg.org/selectors-4/#specificity" target="_blank" rel="external">Selectors Level 4 (Editor’s Draft) - 15. Calculating a selector’s specificity</a><ul>
<li><a href="http://www.hcn.zaq.ne.jp/___/WEB/selectors4-ja.html#specificity" target="_blank" rel="external">広瀬行夫さんによる日本語訳</a></li>
</ul>
</li>
</ul>
<h4 id="資料作成にあたって、以下のページを参考にさせていただきました。">資料作成にあたって、以下のページを参考にさせていただきました。</h4><ul>
<li><a href="http://qiita.com/izumin5210/items/8ae78cb4f4bd325bccb4" target="_blank" rel="external">エンジニアはもう一度CSSとちゃんと向き合ってみよう - 詳細度編 - Qiita</a></li>
<li><a href="http://buburinweb.wp.xdomain.jp/css-detailing" target="_blank" rel="external">[CSS] CSSの詳細度による「適用順(優先順位)」と「上書き」 | ぶぶりんブログ</a></li>
</ul>

    </div>
    <div class="share">
      <ul class="share__list">
        <li class="share__item share__item--twitter">
          <a href="https://twitter.com/share" class="twitter-share-button" data-count="vertical" data-url="http://pepabo.github.io/css/specificity/" data-text="100年後も崩れないCSS勉強会 · 第1回「詳細度」" data-lang="ja">Tweet</a>
        </li>
        <li class="share__item share__item--facebook">
          <div class="fb-like" data-href="http://pepabo.github.io/css/specificity/" data-layout="box_count" data-action="like" data-show-faces="false" data-share="false"></div>
        </li>
        <li class="share__item share__item--google-plus">
          <g:plusone size="tall" href="http://pepabo.github.io/css/specificity/"></g:plusone>
        </li>
        <li class="share__item share__item--hatena-bookmark">
          <a href="http://b.hatena.ne.jp/entry/http://pepabo.github.io/css/specificity/" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="//b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
        </li>
      </ul>
    </div>
    

  
</article>


    </div>
    <footer class="footer">
      <ul class="footer__account">
        <li class="footer__account-list footer__account-list--contact">
          <a href="https://github.com/pepabo/css/issues/new?labels=お問い合わせ&amp;title=第1回「詳細度」について&amp;body=内容は公開されます。ご了承ください。" target="_blank">
            Contact
          </a>
        </li>
      </ul>
      <a class="footer__pagetop" href="#header"></a>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="/css/javascripts/script.js" type="text/javascript"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <script type="text/javascript" src="//apis.google.com/js/plusone.js" async="async"></script>
    <script type="text/javascript" src="//b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </body>
</html>
